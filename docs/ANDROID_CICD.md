# Android CI/CD Pipeline

This document describes the Continuous Integration and Continuous Deployment (CI/CD) pipeline for the Android application in the NFC project.

## Pipeline Overview

The Android CI/CD pipeline is implemented using GitHub Actions and is defined in the `.github/workflows/android-ci.yml` file. The pipeline consists of the following stages:

1. **Lint**: Checks the code for quality issues using Android Lint
2. **Test**: Runs unit tests
3. **Build**: Compiles the app and creates an APK
4. **Deploy**: Creates a GitHub release when changes are pushed to the main branch

## Pipeline Workflow

The pipeline is triggered on:
- Push to `main` or `develop` branches (when changes are made to Android code or the workflow file)
- Pull requests to `main` or `develop` branches (when changes are made to Android code or the workflow file)
- Manual trigger via GitHub's workflow_dispatch

### Stage 1: Lint

The lint stage checks the code for quality issues using Android Lint. It runs the `./gradlew lint` command and uploads the results as an artifact, making them available for review even if the stage fails.

### Stage 2: Test

The test stage runs the unit tests using `./gradlew testDebugUnitTest`. It uploads the test results as an artifact, making them available for review even if the stage fails.

### Stage 3: Build

The build stage compiles the app and creates a debug APK using `./gradlew assembleDebug`. It uploads the APK as an artifact, making it available for download.

### Stage 4: Deploy

The deploy stage creates a GitHub release when changes are pushed to the main branch. It attaches the debug APK to the release.

## Validating the Pipeline

To validate the CI/CD configuration locally, run:

```bash
cd android
./gradlew validateCIConfiguration
```

This will display information about the tasks that will run in the CI pipeline and confirm that the configuration is valid.

## Setting Up Android SDK in CI

The pipeline uses the `android-actions/setup-android@v3` action to set up the Android SDK in the CI environment. This action installs the required Android SDK components based on the project's needs.

## Environment Requirements

The pipeline runs on the latest version of Ubuntu and uses:
- JDK 17
- Gradle 8.0
- Android SDK with required components

## Artifacts

The following artifacts are generated by the pipeline:
- Lint results: `android/app/build/reports/lint-results-debug.html`
- Test results: `android/app/build/reports/tests/testDebugUnitTest/`
- Debug APK: `android/app/build/outputs/apk/debug/app-debug.apk`
